---
title: "Post Exploitation"
date: 2020-01-26T12:46:04+03:00
draft: true
toc: false
images:
---

# Post Exploitation

Steps after gaining initial foothold:

1. Information gathering and enumeration of any system from local

2. Privilege Escalation

3. Maintaining access

4. Pivoting (Lateral Movement)

5. Data exfiltration

# Information gathering

# Enumeration

# Privilege Escalation


## System and Network Information

### Hostname
hostname

### Kernel Version
uname -a

### Operating System
cat /etc/issue

### IP Address
ifconfig

### Running Processes
ps auxw

### Network Routes
route -n

### DNS Server
cat /etc/resolv.conf

### ARP Cache
arp -a

### Current Network Connections
netstat -auntp


## User Information

### Current User Permissions
find / -user *username*

### UID and GUID Information
for users in $(cat /etc/passwd | cut -f1 -d":"); do id $user; done

### Who is logged in to the system
last -a


## Privileged Access & Cleartext Credentials

### Execute With Elevated Privileges?
suid -l

### SUID Binaries
find / -perm -4000 -type -f 2>/dev/null

### Read Sensitive Configuration files
grep "*password*" /etc/*.conf 2>/dev/null

### Read Shadow File
cat /etc/shadow

### Root Directory Contents
ls -las /root

### History Files
find /* -name *.*history* -print 2>/dev/null

### Write to Webserver directories
touch /var/www/moikku


## Services

### Services and Open Ports
netstat -auntp

### Service Configuration Files Readable or Modifiable
find /etc/init.d/ ! -uid 0 -type f 2>/dev/null | xargs ls -la

### Sensitive Information in Configuration Files
cat /etc/mysql/my.cnf

### Stop / Start / Restart Service
services *service_name* start/stop/restart


## Jobs & Tasks

### Which Tasks / Jobs are run and when
cat /etc/crontab
ls -las /etc/cron.*

### Jobs / Tasks that are world writable
find /etc/cron* -type -f -perm -o+w -exec ls -l {}  \;


## Software Version Information

### Software Packages Installed
dpkg -l

### Vulnerable to Existing Exploit
searchsploit "Nginx 1.4.0"

### Edit Software Packages Configuration files


## Tools to Automatically check these:
https://github.com/diego-treitos/linux-smart-enumeration

https://github.com/rebootuser/LinEnum

https://github.com/Tib3rius/AutoRecon

## Additional Links:
https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Methodology%20and%20Resources

https://gtfobins.github.io/

https://lolbas-project.github.io/

https://www.rebootuser.com/?p=1623


# Maintaining access

# Pivoting
